-- C0NEZ0NE GUI FULL SCRIPT (FIXED + NEW FEATURES)
-- Place this LocalScript in StarterPlayerScripts or use a Script Executor in Roblox

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Anti-AFK
local virtualUser = game:service("VirtualUser")
player.Idled:connect(function()
    virtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    wait(1)
    virtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)

-- GUI setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "C0NEZ0NE_GUI"

-- Boot Intro
local bootFrame = Instance.new("Frame", screenGui)
bootFrame.Size = UDim2.new(1, 0, 1, 0)
bootFrame.BackgroundColor3 = Color3.new(0, 0, 0)
local bootText = Instance.new("TextLabel", bootFrame)
bootText.Size = UDim2.new(1, 0, 1, 0)
bootText.Text = "C0NEZ0NE - Booting..."
bootText.TextColor3 = Color3.new(1, 1, 1)
bootText.TextScaled = true
bootText.BackgroundTransparency = 1

wait(2)
bootFrame:Destroy()

-- Toggle Button
local toggleButton = Instance.new("TextButton", screenGui)
toggleButton.Size = UDim2.new(0, 100, 0, 30)
toggleButton.Position = UDim2.new(0.5, -50, 1, -40)
toggleButton.Text = "C0NEZ0NE"
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
toggleButton.TextColor3 = Color3.new(0, 0, 0)
toggleButton.Visible = true

-- Main Frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 300, 0, 400)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
mainFrame.Visible = false
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.BorderSizePixel = 0

-- Dragging functionality
local dragging = false
local dragInput, dragStart, startPos
mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
            startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Toggle behavior
local open = false
toggleButton.MouseButton1Click:Connect(function()
    open = not open
    mainFrame.Visible = open
end)

-- Utility function to create buttons
local function createButton(name, parent, func)
    local button = Instance.new("TextButton", parent)
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, #parent:GetChildren() * 35)
    button.Text = name
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    button.TextColor3 = Color3.new(1,1,1)
    button.MouseButton1Click:Connect(func)
end

-- ESP
local function highlightPlayer(target)
    local box = Instance.new("BoxHandleAdornment")
    box.Size = Vector3.new(4, 6, 2)
    box.Adornee = target:FindFirstChild("HumanoidRootPart")
    box.AlwaysOnTop = true
    box.ZIndex = 5
    box.Color3 = Color3.fromRGB(255, 0, 0)
    box.Transparency = 0.5
    box.Parent = target
end

-- R6 / R15 Switcher (teleport reload trick)
local function switchRig()
    local placeId = game.PlaceId
    local rigType = humanoid.RigType == Enum.HumanoidRigType.R6 and "R15" or "R6"
    StarterGui:SetCore("SendNotification", {
        Title = "Rig Switch",
        Text = "Switching to " .. rigType .. "...",
        Duration = 3
    })
    TeleportService:Teleport(placeId, player)
end

-- Bunny Hop / Wall Climb
local function enableBunnyHop()
    RunService.RenderStepped:Connect(function()
        if humanoid:GetState() == Enum.HumanoidStateType.Jumping then
            humanoid:ChangeState(Enum.HumanoidStateType.Freefall)
        end
    end)
end

-- TP to Cursor
local function tpToCursor()
    if mouse and mouse.Hit then
        character:MoveTo(mouse.Hit.p + Vector3.new(0, 5, 0))
    end
end

-- Delete Tool
local function giveDeleteTool()
    local tool = Instance.new("Tool")
    tool.RequiresHandle = false
    tool.Name = "Delete Tool"
    tool.Activated:Connect(function()
        if mouse.Target then
            mouse.Target:Destroy()
        end
    end)
    tool.Parent = player.Backpack
end

-- Message Spammer
local function spamMessages()
    while true do
        wait(1)
        game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer("C0NEZ0NE RULES", "All")
    end
end

-- Mass TP Items
local function tpItemsToYou()
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Tool") or v:IsA("Part") and v:FindFirstChild("TouchInterest") then
            v.CFrame = character.HumanoidRootPart.CFrame
        end
    end
end

-- Add buttons
createButton("Delete Tool", mainFrame, giveDeleteTool)
createButton("Message Spammer", mainFrame, spamMessages)
createButton("R6/R15 Switcher", mainFrame, switchRig)
createButton("ESP Players", mainFrame, function()
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character then
            highlightPlayer(p.Character)
        end
    end
end)
createButton("Mass TP Items", mainFrame, tpItemsToYou)
createButton("Bunny Hop / Wall Climb", mainFrame, enableBunnyHop)
createButton("TP to Cursor", mainFrame, tpToCursor)

-- Done!
StarterGui:SetCore("SendNotification", {
    Title = "C0NEZ0NE Loaded",
    Text = "All features ready.",
    Duration = 4
})
